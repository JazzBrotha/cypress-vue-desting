language: node_js

node_js:
  - 8.0.0

yarn: true

install:
  - yarn global add codecov
  - yarn

cache:
  directories:
    node_modules

before_script:
  - yarn server -- --silent &
  - yarn start -- --silent &

before_install:
 - yarn global add istanbul
 - cd server
 - yarn
 - cd ..
 - cd client

script:
  - istanbul cover ./node_modules/mocha/bin/_mocha --report lcovonly -- -R spec && codecov --token=81284e0a-18ba-4826-a298-681a9247b4fc
  - yarn test

notifications:
  email: false